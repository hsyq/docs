(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{412:function(a,s,t){"use strict";t.r(s);var e=t(56),r=Object(e.a)({},(function(){var a=this,s=a.$createElement,t=a._self._c||s;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h2",{attrs:{id:"pm2-进程管理快速入门"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#pm2-进程管理快速入门"}},[a._v("#")]),a._v(" PM2 进程管理快速入门")]),a._v(" "),t("p",[a._v("PM2 是一个守护进程管理器，它将帮助您管理和保持您的应用程序在线。PM2 入门很简单，它以简单直观的 CLI 形式供你使用，可通过 NPM 安装。")]),a._v(" "),t("h3",{attrs:{id:"安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装"}},[a._v("#")]),a._v(" 安装")]),a._v(" "),t("p",[a._v("最新的 PM2 版本可通过 NPM 或 Yarn 安装：")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("npm")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" pm2@latest -g\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# or")]),a._v("\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("yarn")]),a._v(" global "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("add")]),a._v(" pm2\n")])])]),t("p",[a._v("要安装 Node.js 和 NPM，您可以使用"),t("a",{attrs:{href:"https://yoember.com/nodejs/the-best-way-to-install-node-js/",target:"_blank",rel:"noopener noreferrer"}},[a._v("NVM"),t("OutboundLink")],1),a._v("。")]),a._v(" "),t("h3",{attrs:{id:"启动应用程序"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#启动应用程序"}},[a._v("#")]),a._v(" 启动应用程序")]),a._v(" "),t("p",[a._v("启动、守护和监控应用程序的最简单方法就是使用以下命令行：")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("$ pm2 start app.js\n")])])]),t("p",[a._v("也可以轻松地启动任何其他类型的应用程序：")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("$ pm2 start bashscript.sh\n$ pm2 start python-app.py --watch\n$ pm2 start binary-file -- --port "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1520")]),a._v("\n")])])]),t("p",[a._v("您可以传递给 CLI的 一些选项：")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 指定app的名字")]),a._v("\n--name "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("app_name"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 监测文件变化，重新启动应用程序")]),a._v("\n--watch\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 设置应用程序重新加载的内存阈值")]),a._v("\n--max-memory-restart "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("200MB"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 指定日志文件的输出路径")]),a._v("\n--log "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("log_path"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 给启动脚本传递额外的参数")]),a._v("\n-- arg1 arg2 arg3\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 设置自动重启的延迟时间")]),a._v("\n--restart-delay "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("delay "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("in")]),a._v(" ms"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 给日志加上时间前缀")]),a._v("\n--time\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 不自动重启应用")]),a._v("\n--no-autorestart\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 通过cron指定强制重启的时间")]),a._v("\n--cron "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("cron_pattern"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 字母意思是不以守护进程的形式运行，表现为启动应用后会在前台打印日志信息")]),a._v("\n--no-daemon\n")])])]),t("p",[a._v("如您所见，当使用 PM2 管理您的应用程序时有许多可用的选项。您将通过您的用例了解它们。")]),a._v(" "),t("h2",{attrs:{id:"管理进程"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#管理进程"}},[a._v("#")]),a._v(" 管理进程")]),a._v(" "),t("p",[a._v("管理应用程序状态很简单，命令如下：")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("$ pm2 restart app_name\n$ pm2 reload app_name\n$ pm2 stop app_name\n$ pm2 delete app_name\n")])])]),t("p",[a._v("你可以通过下面这些参数代替传递"),t("code",[a._v("app_name")]),a._v("：")]),a._v(" "),t("ul",[t("li",[t("code",[a._v("all")]),a._v("对所有进程起作用")]),a._v(" "),t("li",[t("code",[a._v("id")]),a._v("作用于特定的进程 ID")])]),a._v(" "),t("h2",{attrs:{id:"检查状态、日志、指标"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#检查状态、日志、指标"}},[a._v("#")]),a._v(" 检查状态、日志、指标")]),a._v(" "),t("p",[a._v("现在您已经启动了一个应用程序，您可以检查它的状态、日志、指标，甚至可以使用"),t("a",{attrs:{href:"https://pm2.io/",target:"_blank",rel:"noopener noreferrer"}},[a._v("pm2.io"),t("OutboundLink")],1),a._v("获取在线仪表板。")]),a._v(" "),t("h3",{attrs:{id:"列出托管的应用程序"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#列出托管的应用程序"}},[a._v("#")]),a._v(" 列出托管的应用程序")]),a._v(" "),t("p",[a._v("列出 PM2 管理的所有应用程序的状态：")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("$ pm2 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("list"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("ls")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v("status"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n")])])]),t("p",[t("img",{attrs:{src:"https://i.imgur.com/LmRD3FN.png",alt:"https://i.imgur.com/LmRD3FN.png"}})]),a._v(" "),t("h3",{attrs:{id:"查看日志"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#查看日志"}},[a._v("#")]),a._v(" 查看日志")]),a._v(" "),t("p",[a._v("查看实时日志：")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("$ pm2 logs\n")])])]),t("p",[a._v("查看旧日志：")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 显示最近两百行日志")]),a._v("\n$ pm2 logs --lines "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("200")]),a._v("\n")])])]),t("h3",{attrs:{id:"基于终端的仪表板"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#基于终端的仪表板"}},[a._v("#")]),a._v(" 基于终端的仪表板")]),a._v(" "),t("p",[a._v("这是一个直接融入您的终端的实时仪表板：")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("$ pm2 monit\n")])])]),t("p",[t("img",{attrs:{src:"https://i.imgur.com/xo0LDb7.png",alt:"https://i.imgur.com/xo0LDb7.png"}})]),a._v(" "),t("h3",{attrs:{id:"pm2-io-监控和诊断应用的-web-界面"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#pm2-io-监控和诊断应用的-web-界面"}},[a._v("#")]),a._v(" pm2.io：监控和诊断应用的 Web 界面")]),a._v(" "),t("p",[a._v("它是一个基于Web的仪表板 ，带有诊断系统，用来实时监测Nodejs应用和服务器的运行情况。")]),a._v(" "),t("p",[a._v("运行该命令，会唤起 "),t("a",{attrs:{href:"https://app.pm2.io",target:"_blank",rel:"noopener noreferrer"}},[a._v("pm2.io"),t("OutboundLink")],1),a._v("进行登录，之后就能在线使用这个工具了：")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("$ pm2 plus\n")])])]),t("p",[t("img",{attrs:{src:"https://i.imgur.com/sigMHli.png",alt:"https://i.imgur.com/sigMHli.png"}})]),a._v(" "),t("h2",{attrs:{id:"集群模式"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#集群模式"}},[a._v("#")]),a._v(" 集群模式")]),a._v(" "),t("p",[a._v("对于 Node.js 应用程序，PM2 包含一个自动负载均衡器，它将在每个子进程之间共享所有 HTTP[s]/Websocket/TCP/UDP 连接。")]),a._v(" "),t("p",[a._v("以集群模式启动应用程序：")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# max表示以系统的最大进程来建立集群")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$pm2")]),a._v(" start app.js -i max\n")])])]),t("p",[t("a",{attrs:{href:"https://pm2.keymetrics.io/docs/usage/cluster-mode/",target:"_blank",rel:"noopener noreferrer"}},[a._v("在此处"),t("OutboundLink")],1),a._v("阅读有关集群模式的更多信息。")]),a._v(" "),t("h2",{attrs:{id:"生态系统文件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#生态系统文件"}},[a._v("#")]),a._v(" 生态系统文件")]),a._v(" "),t("p",[a._v("您还可以创建一个配置文件，它叫作"),t("code",[a._v("Ecosystem File")]),a._v("（生态系统文件）， 用来管理多个应用程序。")]),a._v(" "),t("p",[a._v("执行这个命令：")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("$ pm2 ecosystem\n")])])]),t("p",[a._v("它将生成一个"),t("code",[a._v("ecosystem.config.js")]),a._v("文件：")]),a._v(" "),t("div",{staticClass:"language-js extra-class"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[a._v("module"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("exports "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[a._v("apps")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[a._v("name")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"app"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[a._v("script")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"./app.js"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[a._v("env")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n      "),t("span",{pre:!0,attrs:{class:"token constant"}},[a._v("NODE_ENV")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"development"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[a._v("env_production")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n      "),t("span",{pre:!0,attrs:{class:"token constant"}},[a._v("NODE_ENV")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"production"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n     "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[a._v("name")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'worker'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n     "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[a._v("script")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'worker.js'")]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])])]),t("p",[a._v("然后就能轻松地启动它：")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("// pm2程序会自动寻找根目录下ecosystem.config.js，然后根据它启动和管理配置的应用\n$ pm2 start\n")])])]),t("p",[t("a",{attrs:{href:"https://pm2.keymetrics.io/docs/usage/application-declaration/",target:"_blank",rel:"noopener noreferrer"}},[a._v("在此处"),t("OutboundLink")],1),a._v("阅读有关应用程序声明的更多信息。")]),a._v(" "),t("h2",{attrs:{id:"设置启动脚本"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#设置启动脚本"}},[a._v("#")]),a._v(" 设置启动脚本")]),a._v(" "),t("p",[a._v("当服务器启动或者重启时，重启PM2程序来管理你的进程，这一点至关重要。")]),a._v(" "),t("p",[a._v("要实现这个功能，只需运行此命令来生成活动启动脚本：")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("$ pm2 startup\n")])])]),t("p",[a._v("然后冻结需要自动重启的进程列表：")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("$ pm2 save\n")])])]),t("p",[t("a",{attrs:{href:"https://pm2.keymetrics.io/docs/usage/startup/",target:"_blank",rel:"noopener noreferrer"}},[a._v("在此处"),t("OutboundLink")],1),a._v("阅读有关启动脚本生成器的更多信息。")]),a._v(" "),t("h2",{attrs:{id:"在更改时重新启动应用程序"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#在更改时重新启动应用程序"}},[a._v("#")]),a._v(" 在更改时重新启动应用程序")]),a._v(" "),t("p",[a._v("使用该"),t("code",[a._v("--watch")]),a._v("选项非常容易：")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("$ "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("cd")]),a._v(" /path/to/my/app\n$ pm2 start env.js --watch --ignore-watch"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"node_modules"')]),a._v("\n")])])]),t("p",[a._v("这将在当前目录+所有子文件夹中的任何文件更改上监视并重新启动应用程序，它将忽略 node_modules 文件夹中的任何更改"),t("code",[a._v('--ignore-watch="node_modules"')]),a._v("。")]),a._v(" "),t("p",[a._v("然后，您可以使用"),t("code",[a._v("pm2 logs")]),a._v("来检查重新启动的应用程序日志。")]),a._v(" "),t("h2",{attrs:{id:"更新-pm2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#更新-pm2"}},[a._v("#")]),a._v(" 更新 PM2")]),a._v(" "),t("p",[a._v("我们做得很简单，版本之间没有重大变化，过程很简单：")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("npm")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" pm2@latest -g\n")])])]),t("p",[a._v("然后更新内存中的 PM2 ：")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("$ pm2 update\n")])])]),t("h2",{attrs:{id:"备忘录"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#备忘录"}},[a._v("#")]),a._v(" 备忘录")]),a._v(" "),t("p",[a._v("下面是一些值得了解的命令。可以在你的开发机器上通过示例应用或者你自己的web应用，尝试使用它们。")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# Fork模式")]),a._v("\npm2 start app.js --name my-api "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 设定应用的名字")]),a._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# Cluster模式")]),a._v("\npm2 start app.js -i "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),a._v("        "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 将使用LB启动最大进程，具体取决于可用的CPU")]),a._v("\npm2 start app.js -i max      "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 等同于上一条的作用，但不推荐")]),a._v("\npm2 scale app +3             "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 给`app`扩展额外的3个进程")]),a._v("\npm2 scale app "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("2")]),a._v("              "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 将`app`扩展或者收缩到2个进程")]),a._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# Listing")]),a._v("\npm2 list               "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 展示所有进程的状态")]),a._v("\npm2 jlist              "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 用原始JSON格式打印所有进程列表")]),a._v("\npm2 prettylist         "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 用美化的JSON打印所有进程列表")]),a._v("\n\npm2 describe "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),a._v("         "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 展示特定进程的所有信息")]),a._v("\n\npm2 monit              "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 使用仪表盘监控所有进程")]),a._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# Logs")]),a._v("\n\npm2 logs "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("--raw"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("       "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 以流的形式显示所有进程日志")]),a._v("\npm2 flush              "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 清空所有日志文件")]),a._v("\npm2 reloadLogs         "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 重新加载所有日志")]),a._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# Actions")]),a._v("\n\npm2 stop all           "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 停止所有进程")]),a._v("\npm2 restart all        "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 重启所有进程")]),a._v("\n\npm2 reload all         "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 零延迟重启所有进程 (针对网络应用)")]),a._v("\n\npm2 stop "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),a._v("             "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 停止特定id的进程")]),a._v("\npm2 restart "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),a._v("          "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 重启特定id的进程")]),a._v("\n\npm2 delete "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),a._v("           "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 从pm2列表中删除id为0进程")]),a._v("\npm2 delete all         "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 从pm2列表中删除所有的进程")]),a._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# Misc")]),a._v("\n\npm2 reset "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("process"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("    "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 重置元数据（重启时间…）")]),a._v("\npm2 updatePM2          "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 更新内存中的pm2 ")]),a._v("\npm2 "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("ping")]),a._v("               "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 确保pm2守护进程已启动")]),a._v("\npm2 sendSignal SIGUSR2 my-app "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 向脚本发送系统信号")]),a._v("\npm2 start app.js --no-daemon\npm2 start app.js --no-vizion\npm2 start app.js --no-autorestart\n")])])]),t("h2",{attrs:{id:"下一步是什么"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#下一步是什么"}},[a._v("#")]),a._v(" 下一步是什么？")]),a._v(" "),t("p",[a._v("了解如何将应用程序的所有行为选项声明到"),t("a",{attrs:{href:"http://pm2.keymetrics.io/docs/usage/application-declaration/",target:"_blank",rel:"noopener noreferrer"}},[a._v("JSON 配置文件"),t("OutboundLink")],1),a._v("中。")]),a._v(" "),t("p",[a._v("了解如何进行"),t("a",{attrs:{href:"http://pm2.keymetrics.io/docs/usage/signals-clean-restart/",target:"_blank",rel:"noopener noreferrer"}},[a._v("干净地停止和重新启动"),t("OutboundLink")],1),a._v("以提高可靠性。")]),a._v(" "),t("p",[a._v("了解如何"),t("a",{attrs:{href:"http://pm2.keymetrics.io/docs/usage/deployment/",target:"_blank",rel:"noopener noreferrer"}},[a._v("轻松部署和更新生产应用程序"),t("OutboundLink")],1),a._v("。")]),a._v(" "),t("p",[a._v("使用"),t("a",{attrs:{href:"https://app.pm2.io/",target:"_blank",rel:"noopener noreferrer"}},[a._v("PM2.io"),t("OutboundLink")],1),a._v("监控您的生产应用程序。")]),a._v(" "),t("h2",{attrs:{id:"如何更新-pm2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#如何更新-pm2"}},[a._v("#")]),a._v(" 如何更新 PM2")]),a._v(" "),t("p",[a._v("安装最新的 pm2 版本：")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("npm")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" pm2@latest -g\n")])])]),t("p",[a._v("然后更新内存中的 PM2 ：")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("$ pm2 update\n")])])])])}),[],!1,null,null,null);s.default=r.exports}}]);